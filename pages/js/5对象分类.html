<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaScript对象：你知道全部的对象分类吗？ | wendZzoo</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/logo.png">
    <meta name="description" content="耶斯莫拉">
    
    <link rel="preload" href="/assets/css/0.styles.f30de916.css" as="style"><link rel="preload" href="/assets/js/app.0764bc43.js" as="script"><link rel="preload" href="/assets/js/7.df5249e8.js" as="script"><link rel="preload" href="/assets/js/29.59b97d3d.js" as="script"><link rel="prefetch" href="/assets/js/1.f5ace8fd.js"><link rel="prefetch" href="/assets/js/10.f5c4c46e.js"><link rel="prefetch" href="/assets/js/11.7e3d14ae.js"><link rel="prefetch" href="/assets/js/12.a6a54196.js"><link rel="prefetch" href="/assets/js/13.e3898570.js"><link rel="prefetch" href="/assets/js/14.b3e69fbc.js"><link rel="prefetch" href="/assets/js/15.dae0c0bf.js"><link rel="prefetch" href="/assets/js/16.542d9324.js"><link rel="prefetch" href="/assets/js/17.e12f1d49.js"><link rel="prefetch" href="/assets/js/18.1d2e2236.js"><link rel="prefetch" href="/assets/js/19.f7c4ad39.js"><link rel="prefetch" href="/assets/js/2.2767aac7.js"><link rel="prefetch" href="/assets/js/20.60b9d0dc.js"><link rel="prefetch" href="/assets/js/21.f93eaacc.js"><link rel="prefetch" href="/assets/js/22.803aa9bd.js"><link rel="prefetch" href="/assets/js/23.9935b94f.js"><link rel="prefetch" href="/assets/js/24.159312e1.js"><link rel="prefetch" href="/assets/js/25.4a82fb8f.js"><link rel="prefetch" href="/assets/js/26.88216395.js"><link rel="prefetch" href="/assets/js/27.4ce830f5.js"><link rel="prefetch" href="/assets/js/28.efe8daa0.js"><link rel="prefetch" href="/assets/js/3.a18bd02b.js"><link rel="prefetch" href="/assets/js/30.01b4bee6.js"><link rel="prefetch" href="/assets/js/31.56826f9e.js"><link rel="prefetch" href="/assets/js/32.3a3cc3f0.js"><link rel="prefetch" href="/assets/js/33.12cd56b0.js"><link rel="prefetch" href="/assets/js/34.1909513a.js"><link rel="prefetch" href="/assets/js/35.943ed2a0.js"><link rel="prefetch" href="/assets/js/36.0043e3d4.js"><link rel="prefetch" href="/assets/js/4.42f5992f.js"><link rel="prefetch" href="/assets/js/5.1e843b35.js"><link rel="prefetch" href="/assets/js/8.f72137d6.js"><link rel="prefetch" href="/assets/js/9.3c1d537e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f30de916.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">wendZzoo</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><span class="title">更多</span> <span class="arrow down"></span></button> <button type="button" aria-label="更多" class="mobile-dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/guide/introduce.html" class="nav-link">
  个人
</a></li><li class="dropdown-item"><!----> <a href="/pages/guide/about.html" class="nav-link">
  关于
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><span class="title">更多</span> <span class="arrow down"></span></button> <button type="button" aria-label="更多" class="mobile-dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/guide/introduce.html" class="nav-link">
  个人
</a></li><li class="dropdown-item"><!----> <a href="/pages/guide/about.html" class="nav-link">
  关于
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>JavaScript对象：你知道全部的对象分类吗？</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/js/5%E5%AF%B9%E8%B1%A1%E5%88%86%E7%B1%BB.html#javascript-中的对象分类" class="sidebar-link">JavaScript 中的对象分类</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/js/5%E5%AF%B9%E8%B1%A1%E5%88%86%E7%B1%BB.html#宿主对象" class="sidebar-link">宿主对象</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/js/5%E5%AF%B9%E8%B1%A1%E5%88%86%E7%B1%BB.html#内置对象-固有对象" class="sidebar-link">内置对象-固有对象</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/js/5%E5%AF%B9%E8%B1%A1%E5%88%86%E7%B1%BB.html#内置对象-原生对象" class="sidebar-link">内置对象-原生对象</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/js/5%E5%AF%B9%E8%B1%A1%E5%88%86%E7%B1%BB.html#用对象来模拟函数与构造器-函数对象与构造器对象" class="sidebar-link">用对象来模拟函数与构造器：函数对象与构造器对象</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/js/5%E5%AF%B9%E8%B1%A1%E5%88%86%E7%B1%BB.html#特殊行为的对象" class="sidebar-link">特殊行为的对象</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="javascript-中的对象分类"><a href="#javascript-中的对象分类" class="header-anchor">#</a> JavaScript 中的对象分类</h2> <p>把对象分成几类。</p> <ul><li>宿主对象（host Objects）：由 JavaScript 宿主环境提供的对象，它们的行为完全由宿主环境决定。</li> <li>内置对象（Built-in Objects）：由 JavaScript 语言提供的对象。
<ul><li>固有对象（Intrinsic Objects ）：由标准规定，随着 JavaScript 运行时创建而自动创建的对象实例。</li> <li>原生对象（Native Objects）：可以由用户通过 Array、RegExp 等内置构造器或者特殊语法创建的对象。</li> <li>普通对象（Ordinary Objects）：由{}语法、Object 构造器或者 class 关键字定义类创建的对象，它能够被原型继承。</li></ul></li></ul> <h2 id="宿主对象"><a href="#宿主对象" class="header-anchor">#</a> 宿主对象</h2> <p>JavaScript 宿主对象千奇百怪，但是前端最熟悉的无疑是浏览器环境中的宿主了。</p> <p>在浏览器环境中，我们都知道全局对象是 window，window 上又有很多属性，如 document。实际上，这个全局对象 window 上的属性，一部分来自 JavaScript 语言，一部分来自浏览器环境。</p> <p>JavaScript 标准中规定了全局对象属性，W3C 的各种标准中规定了 Window 对象的其它属性。</p> <p>宿主对象也分为固有的和用户可创建的两种，比如 document.createElement 就可以创建一些 DOM 对象。</p> <p>宿主也会提供一些构造器，比如我们可以使用 new Image 来创建 img 元素......</p> <h2 id="内置对象-固有对象"><a href="#内置对象-固有对象" class="header-anchor">#</a> 内置对象-固有对象</h2> <p>固有对象是由标准规定，随着 JavaScript 运行时创建而自动创建的对象实例。</p> <p>固有对象在任何 JavaScript 代码执行前就已经被创建出来了，它们通常扮演者类似基础库的角色。</p> <h2 id="内置对象-原生对象"><a href="#内置对象-原生对象" class="header-anchor">#</a> 内置对象-原生对象</h2> <p>JavaScript 中，能够通过语言本身的构造器创建的对象称作原生对象。</p> <img src="/pages/JS分类-1.png"> <p>通过这些构造器，我们可以用 new 运算创建新的对象，所以我们把这些对象称作原生对象。</p> <p>几乎所有这些构造器的能力都是无法用纯 JavaScript 代码实现的，它们也无法用 class/extend 语法来继承。</p> <p>这些构造器创建的对象多数使用了私有字段, 例如：</p> <ul><li>Error: [[ErrorData]]</li> <li>Boolean: [[BooleanData]]</li> <li>Number: [[NumberData]]</li> <li>Date: [[DateValue]]</li> <li>RegExp: [[RegExpMatcher]]</li> <li>Symbol: [[SymbolData]]</li> <li>Map: [[MapData]]</li> <li>......</li></ul> <p>这些字段使得原型继承方法无法正常工作，所以，我们可以认为，所有这些原生对象都是为了特定能力或者性能，而设计出来的“特权对象”。</p> <h2 id="用对象来模拟函数与构造器-函数对象与构造器对象"><a href="#用对象来模拟函数与构造器-函数对象与构造器对象" class="header-anchor">#</a> 用对象来模拟函数与构造器：函数对象与构造器对象</h2> <p>函数对象的定义是：具有[[call]]私有字段的对象，构造器对象的定义是：具有私有字段[[construct]]的对象。</p> <p>JavaScript 用对象模拟函数的设计代替了一般编程语言中的函数，它们可以像其它语言的函数一样被调用、传参。任何宿主只要提供了“具有[[call]]私有字段的对象”，就可以被 JavaScript 函数调用语法支持。</p> <blockquote><p>[[call]]私有字段必须是一个引擎中定义的函数，需要接受 this 值和调用参数，并且会产生域的切换。</p></blockquote> <p>我们可以这样说，任何对象只需要实现[[call]]，它就是一个函数对象，可以去作为函数被调用。而如果它能实现[[construct]]，它就是一个构造器对象，可以作为构造器被调用。</p> <p>对于为 JavaScript 提供运行环境的程序员来说，只要字段符合，我们在上文中提到的宿主对象和内置对象（如 Symbol 函数）可以模拟函数和构造器。</p> <p>当然了，用户用 function 关键字创建的函数必定同时是函数和构造器。不过，它们表现出来的行为效果却并不相同。</p> <p>对于宿主和内置对象来说，它们实现[[call]]（作为函数被调用）和[[construct]]（作为构造器被调用）不总是一致的。比如内置对象 Date 在作为构造器调用时产生新的对象，作为函数时，则产生字符串，见以下代码：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>而浏览器宿主环境中，提供的 Image 构造器，则根本不允许被作为函数调用。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//抛出错误</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>再比如基本类型（String、Number、Boolean），它们的构造器被当作函数调用，则产生类型转换的效果。</p> <p>值得一提的是，在 ES6 之后 =&gt; 语法创建的函数仅仅是函数，它们无法被当作构造器使用，见以下代码：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>对于用户使用 function 语法或者 Function 构造器创建的对象来说，[[call]]和[[construct]]行为总是相似的，它们执行同一段代码。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> v <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//把f作为函数调用</span>
<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//把f作为构造器调用</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>大致可以认为，它们[[construct]]的执行过程如下：</p> <ul><li>以 Object.prototype 为原型创建一个新对象；</li> <li>以新对象为 this，执行函数的[[call]]；</li> <li>如果[[call]]的返回值是对象，那么，返回这个对象，否则返回第一步创建的新对象。</li></ul> <p>这样的规则造成了个有趣的现象，如果我们的构造器返回了一个新的对象，那么 new 创建的新对象就变成了一个构造函数之外完全无法访问的对象，这一定程度上可以实现“私有”。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">cls</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">getValue</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">cls</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
o<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//100</span>
<span class="token comment">//a在外面永远无法访问到</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>这就是闭包的背景知识， 在其它面向对象的语言中 a 就相当于私有变量（或属性），只能通过方法来进行访问，a 对于外部而言不可见。</p> <h2 id="特殊行为的对象"><a href="#特殊行为的对象" class="header-anchor">#</a> 特殊行为的对象</h2> <p>除了上面介绍的对象之外，在固有对象和原生对象中，有一些对象的行为跟正常对象有很大区别。</p> <p>它们常见的下标运算（就是使用中括号或者点来做属性访问）或者设置原型跟普通对象不同，这里简单总结一下。</p> <ul><li>Array：Array 的 length 属性根据最大的下标自动发生变化。</li> <li>Object.prototype：作为所有正常对象的默认原型，不能再给它设置原型了。</li> <li>String：为了支持下标运算，String 的正整数属性访问会去字符串里查找。</li> <li>Arguments：arguments 的非负整数型下标属性跟对应的变量联动。</li> <li>模块的 namespace 对象：特殊的地方非常多，跟一般对象完全不一样，尽量只用于 import 吧。</li> <li>类型数组和数组缓冲区：跟内存块相关联，下标运算比较特殊。</li> <li>bind 后的 function：跟原来的函数相关联。</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.0764bc43.js" defer></script><script src="/assets/js/7.df5249e8.js" defer></script><script src="/assets/js/29.59b97d3d.js" defer></script>
  </body>
</html>
